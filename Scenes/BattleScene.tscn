[gd_scene load_steps=19 format=3 uid="uid://dqbe2220e2hdv"]

[ext_resource type="Script" path="res://Scripts/Controllers/PlayerController.cs" id="1_d62xq"]
[ext_resource type="Script" path="res://Scripts/Actor/ActorSpawner.cs" id="1_ogvtl"]
[ext_resource type="Script" path="res://Scripts/Controllers/CameraController.cs" id="2_7n0hf"]
[ext_resource type="Script" path="res://Scripts/MultiplayerContainer.cs" id="3_5vdu8"]
[ext_resource type="Resource" uid="uid://dj3kma3ilnn7q" path="res://Actors/ActorSetups.tres" id="3_s4vdo"]
[ext_resource type="Resource" uid="uid://cddgg8vvo6ggf" path="res://Action/Move.tres" id="4_dxrxp"]
[ext_resource type="Resource" uid="uid://w6fsn0mtbhy0" path="res://Action/Attack.tres" id="5_1b6o0"]
[ext_resource type="Texture2D" uid="uid://dl0cm3rsw0n72" path="res://Images/Grass0.png" id="7_1rh3b"]
[ext_resource type="PackedScene" uid="uid://bh025c2qwoxiv" path="res://Action/ActionRange.tscn" id="8_8chmn"]
[ext_resource type="Texture2D" uid="uid://cyclm6ebvxd8h" path="res://Images/Grass1.png" id="8_bfhsi"]
[ext_resource type="Script" path="res://Scripts/Actor/ActorAvatars.cs" id="8_e7axk"]
[ext_resource type="Script" path="res://Scripts/Actor/ActorContainer.cs" id="9_0vfcd"]
[ext_resource type="Texture2D" uid="uid://catxthhhls552" path="res://Images/Grass2.png" id="9_ftk6f"]
[ext_resource type="PackedScene" uid="uid://cb3j6sa8w2cm3" path="res://Actors/Actor.tscn" id="9_m5eed"]
[ext_resource type="PackedScene" uid="uid://cqauknin6ppw1" path="res://Actors/ActorAvatar.tscn" id="9_yr3ug"]
[ext_resource type="Script" path="res://Scripts/Actor/ActorSelection.cs" id="12_t8ruj"]
[ext_resource type="Texture2D" uid="uid://idoo2rtmn6n" path="res://Images/SelectCircle.png" id="13_dwphc"]

[sub_resource type="BoxShape3D" id="BoxShape3D_t4n4b"]
size = Vector3(100, 1, 100)

[node name="BattleScene" type="Node3D"]

[node name="CameraController" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
script = ExtResource("2_7n0hf")
camera = NodePath("Camera3D")

[node name="AudioListener3D" type="AudioListener3D" parent="CameraController"]

[node name="Camera3D" type="Camera3D" parent="CameraController"]

[node name="Controllers" type="Node" parent="."]

[node name="PlayerController" type="Node" parent="Controllers" node_paths=PackedStringArray("_rayCast", "_actorSelection")]
script = ExtResource("1_d62xq")
_rayCast = NodePath("RayCast3D")
_targetMask = 3
_groundMask = 2
_actionRangePrefab = ExtResource("8_8chmn")
_actorSelection = NodePath("ActorSelection")
_actionMove = ExtResource("4_dxrxp")
_actionAttack = ExtResource("5_1b6o0")

[node name="RayCast3D" type="RayCast3D" parent="Controllers/PlayerController"]

[node name="ActorSelection" type="Node3D" parent="Controllers/PlayerController" node_paths=PackedStringArray("sprite")]
script = ExtResource("12_t8ruj")
sprite = NodePath("Sprite3D")

[node name="Sprite3D" type="Sprite3D" parent="Controllers/PlayerController/ActorSelection"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0.2, 0)
pixel_size = 0.02
double_sided = false
texture = ExtResource("13_dwphc")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ActorAvatars" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("_playerAvatarsContainer", "_enemyAvatarsContainer")]
layout_mode = 3
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_top = -250.0
grow_horizontal = 2
grow_vertical = 0
script = ExtResource("8_e7axk")
_avatarPrefab = ExtResource("9_yr3ug")
_playerAvatarsContainer = NodePath("PlayerAvatars HBoxContainer")
_enemyAvatarsContainer = NodePath("EnemyAvatars HBoxContainer")

[node name="PlayerAvatars HBoxContainer" type="HBoxContainer" parent="CanvasLayer/ActorAvatars"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
alignment = 1

[node name="EnemyAvatars HBoxContainer" type="HBoxContainer" parent="CanvasLayer/ActorAvatars"]
layout_mode = 0
offset_top = 100.0
offset_right = 40.0
offset_bottom = 140.0
alignment = 1

[node name="MultiplayerContainer" type="Node" parent="." node_paths=PackedStringArray("_actorSpawner")]
script = ExtResource("3_5vdu8")
_actorSpawner = NodePath("ActorSpawner")

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="MultiplayerContainer"]
_spawnable_scenes = PackedStringArray("res://Actors/Actor.tscn")
spawn_path = NodePath("../ActorContainer")

[node name="ActorSpawner" type="Node" parent="MultiplayerContainer" node_paths=PackedStringArray("_multiplayerContainer", "_actorContainer")]
script = ExtResource("1_ogvtl")
_multiplayerContainer = NodePath("..")
_actorContainer = NodePath("../ActorContainer")
_actorPrefab = ExtResource("9_m5eed")
_setups = ExtResource("3_s4vdo")

[node name="ActorContainer" type="Node3D" parent="MultiplayerContainer"]
script = ExtResource("9_0vfcd")

[node name="Ground StaticBody3D" type="StaticBody3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("BoxShape3D_t4n4b")

[node name="Scene Decoration" type="Node3D" parent="."]

[node name="Sprite3D" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.56891, 0.5, -3.25277)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("7_1rh3b")

[node name="Sprite3D2" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.16452, 0.5, -2.52841)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("7_1rh3b")

[node name="Sprite3D3" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.93496, 0.5, 3.10616)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("7_1rh3b")

[node name="Sprite3D4" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.95088, 1, -3.97131)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("8_bfhsi")

[node name="Sprite3D5" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.04635, 1, -0.94851)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("8_bfhsi")

[node name="Sprite3D6" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.683204, 1, 1.63452)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("8_bfhsi")

[node name="Sprite3D7" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.30713, 0.5, 3.13823)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("9_ftk6f")

[node name="Sprite3D8" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.12192, 0.5, 0.624097)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("9_ftk6f")

[node name="Sprite3D9" type="Sprite3D" parent="Scene Decoration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.981948, 0.5, -1.28056)
pixel_size = 0.0625
billboard = 1
double_sided = false
texture_filter = 0
texture = ExtResource("9_ftk6f")
